webpackJsonp([1],{NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("xd7I"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=a("C7Lr")({name:"App"},o,!1,function(e){a("a4gW")},null,null).exports,i=a("3XdE"),s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[e._v(e._s(e.msg))]),e._v(" "),a("h2",[e._v("Essential Links")]),e._v(" "),e._m(0),e._v(" "),a("h2",[e._v("Ecosystem")]),e._v(" "),e._m(1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[e._v("\n        Core Docs\n      ")])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[e._v("\n        Forum\n      ")])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[e._v("\n        Community Chat\n      ")])]),e._v(" "),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[e._v("\n        Twitter\n      ")])]),e._v(" "),a("br"),e._v(" "),a("li",[a("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[e._v("\n        Docs for This Template\n      ")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};var l=a("C7Lr")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},s,!1,function(e){a("tGEK")},"data-v-d8ec41bc",null).exports,c=a("aA9S"),d=a.n(c),u=a("3cXf"),p=a.n(u),h={name:"Index",data:function(){return{search:"",booksData:[],oldData:{},updateData:{},createData:{name:"",price:0},dialogUpdateVisible:!1,dialogCreateVisible:!1,loading:!0}},methods:{handleShowCreate:function(){this.dialogCreateVisible=!0},handleCreate:function(){var e=this;""!==this.createData.name?0!==this.createData.price?(this.$axios.post("/create/",p()(this.createData)).then(function(t){200===t.data.code?(e.$message.success("create "+e.createData.name+" success"),e.dialogCreateVisible=!0,e.handleRead()):e.$message.error("can't read books databases")}),console.log(this.createData)):this.$message.error("please input book price"):this.$message.error("please input book name")},handleRead:function(){var e=this;this.booksData=[],this.$axios.get("/read").then(function(t){if(e.loading=!1,200===t.data.code){var a=JSON.parse(t.data.data);for(var n in a)a[n].fields.id=a[n].pk,a[n].fields.book_price=Number(a[n].fields.book_price),e.booksData.push(a[n].fields);console.log(e.booksData)}else e.$message.console.error("can't read books database")}).catch(function(e){console.log(e)})},handleUpdate:function(e,t){this.dialogUpdateVisible=!0,this.updateData=d()({},{id:t.id,name:t.book_name,price:t.book_price,time:t.book_time}),this.oldData=d()({},{id:t.id,name:t.book_name,price:t.book_price,time:t.book_time})},handleDelete:function(e,t){var a=this;this.$confirm("are you sure to delete "+this.updateData.name+" ?","",{confirmButtonText:"submit",cancelButtonText:"cancel",type:"warning"}).then(function(){a.$axios.post("/delete/",p()(t)).then(function(e){200===e.data.code?(a.$message.success("delete "+a.updateData.name+" success"),a.handleRead()):a.$message.error("can't read books database")})}).catch(function(){a.$message.info("cancel delete")})},handleCancel:function(e){this.$message.info("cancel"),this[e]=!1},handleConfirm:function(e){var t=this;this.updateData.name!==this.oldData.name||this.updateData.price!==this.oldData.price?(this[e]=!1,this.$axios.post("/update/",p()(this.updateData)).then(function(e){200===e.data.code?(t.$message.success("update "+t.updateData.name+" success"),t.handleRead()):t.$message.error("can't read books database")})):this.$message.error("please update something or cancel")},handleSearch:function(){var e=this;this.$axios.get("search",{params:{content:this.search}}).then(function(t){if(200===t.data.code)if(t.data.data&&JSON.parse(t.data.data).length>0){e.booksData=[];var a=JSON.parse(t.data.data);for(var n in a){var o={id:a[n].pk,book_name:a[n].fields.book_name,book_price:Number(a[n].fields.book_price),book_time:a[n].fields.book_time};e.booksData.push(o)}}else e.$message.error("can't search contains of '"+e.search+"' in database");else e.$message.error("can't search books in database")})}},mounted:function(){this.handleRead()}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"primary",round:""},on:{click:e.handleShowCreate}},[e._v("增加书籍")]),e._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),a("el-button",{attrs:{type:"primary",round:""},on:{click:e.handleSearch}},[e._v("搜索")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"600px",margin:"40px auto"},attrs:{data:e.booksData,height:"450",border:""}},[a("el-table-column",{attrs:{prop:"book_name",label:"书名",align:"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"book_price",label:"价格",align:"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleUpdate(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:"修改书籍",visible:e.dialogUpdateVisible},on:{"update:visible":function(t){e.dialogUpdateVisible=t}}},[a("el-form",{attrs:{model:e.updateData}},[a("el-form-item",{attrs:{label:"书籍名称"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.updateData.name,callback:function(t){e.$set(e.updateData,"name",t)},expression:"updateData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"书籍价格"}},[a("el-input-number",{attrs:{precision:2,step:.01,max:9999},model:{value:e.updateData.price,callback:function(t){e.$set(e.updateData,"price",t)},expression:"updateData.price"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.handleCancel("dialogUpdateVisible")}}},[e._v("Cancel")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("dialogUpdateVisible")}}},[e._v("Submit")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"增加书籍",visible:e.dialogCreateVisible},on:{"update:visible":function(t){e.dialogCreateVisible=t}}},[a("el-form",{attrs:{model:e.createData}},[a("el-form-item",{attrs:{label:"书籍名称"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.createData.name,callback:function(t){e.$set(e.createData,"name",t)},expression:"createData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"书籍价格"}},[a("el-input-number",{attrs:{precision:2,step:.01,max:9999},model:{value:e.createData.price,callback:function(t){e.$set(e.createData,"price",t)},expression:"createData.price"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.handleCancel("dialogCreateVisible")}}},[e._v("Cancel")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleCreate("dialogCreateVisible")}}},[e._v("Submit")])],1)],1)],1)},staticRenderFns:[]};var f=a("C7Lr")(h,m,!1,function(e){a("O7oF")},"data-v-1327d445",null).exports;n.default.use(i.a);var v=new i.a({routes:[{path:"/hello",name:"HelloWorld",component:l},{path:"/",name:"Index",component:f}]}),b=a("4DWU"),_=a.n(b),g=(a("epTE"),a("aozt")),k=a.n(g);n.default.use(_.a),n.default.config.productionTip=!1,n.default.prototype.$axios=k.a,k.a.defaults.baseURL="http://127.0.0.1:8000/api/",new n.default({el:"#app",router:v,components:{App:r},template:"<App/>"})},O7oF:function(e,t){},a4gW:function(e,t){},epTE:function(e,t){},tGEK:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e8b743523651638851d4.js.map